{"remainingRequest":"/Users/drema/Desktop/Drema/vueSKKS/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drema/Desktop/Drema/vueSKKS/vue/src/views/user/Acceptance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/drema/Desktop/Drema/vueSKKS/vue/src/views/user/Acceptance.vue","mtime":1644509587424},{"path":"/Users/drema/Desktop/Drema/vueSKKS/vue/node_modules/cache-loader/dist/cjs.js","mtime":1644509624454},{"path":"/Users/drema/Desktop/Drema/vueSKKS/vue/node_modules/babel-loader/lib/index.js","mtime":1644509624775},{"path":"/Users/drema/Desktop/Drema/vueSKKS/vue/node_modules/cache-loader/dist/cjs.js","mtime":1644509624454},{"path":"/Users/drema/Desktop/Drema/vueSKKS/vue/node_modules/vue-loader/lib/index.js","mtime":1644509624966}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVaUJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvdWkvQnV0dG9uJwppbXBvcnQgVWlJbnB1dCBmcm9tICdAL2NvbXBvbmVudHMvdWkvSW5wdXQnCmltcG9ydCBidG5TZWMgZnJvbSAnQC9jb21wb25lbnRzL3VpL0J0blNlYycKaW1wb3J0IFVpTWFyayBmcm9tICdAL2NvbXBvbmVudHMvdWkvTWFyaycKaW1wb3J0IFVpVGFicyBmcm9tICdAL2NvbXBvbmVudHMvdWkvVGFicycKaW1wb3J0IHtIVFRQfSBmcm9tICJAL2h0dHAtY29tbW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJBY2NlcHRhbmNlIiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBVaUJ1dHRvbiAsIFVpVGFicyAsIFVpTWFyayAsIGJ0blNlYywgVWlJbnB1dAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGl0bGUgOiAn0KHQvtC30LTQsNGC0Ywg0L/RgNC40LXQvNC60YMnLAogICAgICAgICAgICBkYXRhIDogbnVsbCwKICAgICAgICAgICAgTGlzdFJlcG9ydERhdGE6IFtdLAogICAgICAgICAgICBMaXN0UmVwb3J0RGF0YUNoYW5nZXM6IFtdLAogICAgICAgICAgICBlcnJvcnMgOiBbXSwKICAgICAgICAgICAgdGFiTnVtOiAwLAogICAgICAgICAgICBzZWFyY2hSZXF1ZXN0OiAnJywKICAgICAgICAgICAgaWNvbkRhdGE6IHsKICAgICAgICAgICAgICAgIG5ldyA6ICcnLAogICAgICAgICAgICAgICAgZW5kZWQgOiAnY29udHJ1c3QtdXNlcnMnLAogICAgICAgICAgICAgICAgaG90IDogJ2NvbnRydXN0LUZpcmUnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbG9yU3RhdHVzOiB7CiAgICAgICAgICAgICAgICBuZXcgOiB7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZCA6ICcjRkZDMTA3JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlbmRlZCA6IHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI0Q0RUREQScsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMTU1NzI0JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhvdCA6IHsKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnI0Y4RDdEQScsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjNzIxQzI0JwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhVGFicyA6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ9CS0YHQtScsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn0J3QsCDRgdC10LPQvtC00L3RjycsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn0JPQvtGA0Y/RidC40LUnLAogICAgICAgICAgICAgICAgICAgIGljb246ICdjb250cnVzdC1GaXJlJywKICAgICAgICAgICAgICAgICAgICBpY29uX2NvbG9yOiAnI2Q2MDAwMCcsCgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ9CT0LjQsdC60LjQuSDQs9GA0LDRhNC40LonLAogICAgICAgICAgICAgICAgICAgIGljb246ICdjb250cnVzdC1GaWx0ZXJfYWRkJywKCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfSwKICAgIGJlZm9yZUNyZWF0ZSgpewogICAgICBsZXQgYXBpRGF0YSA9IHsKICAgICAgICBtZXRob2Q6ICcvYXBpL3YyL1FBUUMvUmVwb3J0LmdldExpc3QnLAogICAgICAgIHJlcXVlc3REYXRhOiB7CiAgICAgICAgICByb2xlOiAnY29udHJhY3RvcicsCiAgICAgICAgICByZWZlcmVuY2VzIDogWyJzZWN0b3IiICwgJ2hvdCcgLCAnY2xhc3NpZmllcl9jb2RlJyAsICdzcGVjJyAsICdjb250cmFjdG9yJyAsICdwcm9qZWN0JyAsICdjcmVhdG9yJywgJ2N1c3RvbWVyJywgJ2hlYWRfZm9yZW1hbicsICdvcmcnICwgJ3BsYWNlJ10KICAgICAgICB9LAogICAgICB9CgogICAgICBIVFRQLmdldChhcGlEYXRhLm1ldGhvZCx7CiAgICAgICAgcGFyYW1zOiBhcGlEYXRhLnJlcXVlc3REYXRhCiAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMuTGlzdFJlcG9ydERhdGEgPSByZXNwb25zZS5kYXRhLnJlc3VsdAogICAgICAgICAgICB0aGlzLkxpc3RSZXBvcnREYXRhQ2hhbmdlcyA9IHRoaXMuTGlzdFJlcG9ydERhdGEKICAgICAgICAgICAgdGhpcy5MaXN0UmVwb3J0RGF0YUNoYW5nZXMubWFwKG9uZSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIG9uZS5yZWZlcmVuY2VzLmhvdCA9IHsKICAgICAgICAgICAgICAgIHR5cGU6IG9uZS5yZWZlcmVuY2VzLmhvdCwKICAgICAgICAgICAgICAgIG5hbWU6ICfQs9C+0YDRj9GH0LDRjycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuTGlzdFJlcG9ydERhdGFDaGFuZ2VzLm1hcChvbmUgPT4gewogICAgICAgICAgICAgIGlmKG9uZS5kdWVfZGF0ZSA9PT0gbnVsbCkgcmV0dXJuIG9uZS5kdWVfZGF0ZSA9ICfQktGA0LXQvNGPINC90LUg0L3QsNC30L3QsNGH0LXQvdC+JwogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgICAgdGhyb3cgZQogICAgICAgICAgfSkKCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHRhYklkeCh2YWx1ZSl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTsKICAgICAgICAgICAgdGhpcy50YWJOdW0gPSB2YWx1ZQogICAgICAgIH0sCiAgICAgICAgaWNvbkNob2lzZShpdGVtKXsKICAgICAgICAgICAgaWYoaXRlbS5zdGF0dXMgPT09ICduZXcnKSByZXR1cm4KICAgICAgICAgICAgaWYoaXRlbS5zdGF0dXMgPT09ICdwcm9jZXNzX2VuZGVkJykgcmV0dXJuIAogICAgICAgIH0sCiAgICAgICAgc3R5bGVDaG9pc2UoaXRlbSl7CiAgICAgICAgICAgIGlmKGl0ZW0uc3RhdHVzID09PSAnbmV3JykgcmV0dXJuIHRoaXMuY29sb3JTdGF0dXMubmV3CiAgICAgICAgICAgIGlmKGl0ZW0uc3RhdHVzID09PSAncHJvY2Vzc19lbmRlZCcpIHJldHVybiB0aGlzLmNvbG9yU3RhdHVzLmVuZGVkCgoKICAgICAgICB9LAogICAgICAgIHNlYXJjaFN0YXJ0KHJlcXVlc3QgPSAnJyl7CiAgICAgICAgICBsZXQgYXBpRGF0YSA9IHsKICAgICAgICAgICAgbWV0aG9kOiAnL2FwaS92Mi9RQVFDL1JlcG9ydC5nZXRMaXN0JywKICAgICAgICAgICAgcmVxdWVzdERhdGE6IHsKICAgICAgICAgICAgICBmaW5kOiByZXF1ZXN0LAogICAgICAgICAgICAgIHJvbGU6ICdjb250cmFjdG9yJywKICAgICAgICAgICAgICByZWZlcmVuY2VzIDogWyJzZWN0b3IiICwgJ2hvdCcgLCAnY2xhc3NpZmllcl9jb2RlJyAsICdzcGVjJyAsICdjb250cmFjdG9yJyAsICdwcm9qZWN0JyAsICdjcmVhdG9yJywgJ2N1c3RvbWVyJywgJ2hlYWRfZm9yZW1hbicsICdvcmcnICwgJ3BsYWNlJ10KICAgICAgICAgICAgfSwKICAgICAgICAgIH0KCiAgICAgICAgICBIVFRQLmdldChhcGlEYXRhLm1ldGhvZCx7CiAgICAgICAgICAgIHBhcmFtczogYXBpRGF0YS5yZXF1ZXN0RGF0YQogICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLkxpc3RSZXBvcnREYXRhID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQKICAgICAgICAgICAgICAgIHRoaXMuTGlzdFJlcG9ydERhdGFDaGFuZ2VzID0gdGhpcy5MaXN0UmVwb3J0RGF0YQogICAgICAgICAgICAgICAgdGhpcy5MaXN0UmVwb3J0RGF0YUNoYW5nZXMubWFwKG9uZSA9PiB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBvbmUucmVmZXJlbmNlcy5ob3QgPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogb25lLnJlZmVyZW5jZXMuaG90LAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICfQs9C+0YDRj9GH0LDRjycKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMuTGlzdFJlcG9ydERhdGFDaGFuZ2VzLm1hcChvbmUgPT4gewogICAgICAgICAgICAgICAgICBpZihvbmUuZHVlX2RhdGUgPT09IG51bGwpIHJldHVybiBvbmUuZHVlX2RhdGUgPSAn0JLRgNC10LzRjyDQvdC1INC90LDQt9C90LDRh9C10L3QvicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB0aGlzLnRhYnNMb2dpYygpCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgICAgICAgdGhyb3cgZQogICAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICB0YWJzTG9naWMoKXsKICAgICAgICAgIGlmKHRoaXMudGFiTnVtID09PSAyKSB0aGlzLkxpc3RSZXBvcnREYXRhQ2hhbmdlcyA9IHRoaXMuTGlzdFJlcG9ydERhdGEuZmlsdGVyKG9uZSA9PiB7CiAgICAgICAgICAgIHJldHVybiBvbmUucmVmZXJlbmNlcy5ob3QudHlwZQogICAgICAgICAgfSkKICAgICAgICAgIGlmKHRoaXMudGFiTnVtICE9PSAyKSB0aGlzLkxpc3RSZXBvcnREYXRhQ2hhbmdlcyA9IHRoaXMuTGlzdFJlcG9ydERhdGEKICAgICAgICB9LAogICAgICAgIGdvVG9FbGVtZW50KGl0ZW0pewogICAgICAgICAgICBpZiAoaXRlbS5pZCkgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnT25lQWNjZXB0YW5jZScsIHBhcmFtczogeyBJZDogaXRlbS5pZCwgc3RhdHVzOiBpdGVtLnN0YXR1cyB9IH0pCiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgdGFiTnVtOiBmdW5jdGlvbigpewogICAgICAgICAgdGhpcy50YWJzTG9naWMoKQogICAgICAgIH0KICAgIH0sCn0K"},{"version":3,"sources":["Acceptance.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Acceptance.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n    <section class=\"acceptance unselectable\">\n    <div class=\"title-wrapper\">\n      <h2 class=\"list-h\">Приемки</h2>\n      <UiButton :title=\"title\"></UiButton>\n    </div>\n    <div class=\"tabs-search-wrapper\">\n        <UiTabs :getDataTabs=\"dataTabs\" @tab-idx=\"tabIdx\"/> \n    <div class=\"search-wrapper\">\n        <UiInput mask=\"Поиск\" \n                 icon=\"contrust-Search_tiny\" \n                 v-model.trim=\"searchRequest\" \n                 class=\"mr-3\" \n                 @keyup.enter.native=\"searchStart(searchRequest)\" \n                 style=\"margin-bottom: 0px\"/>\n\n        <btn-sec title=\"Найти\" \n                 type=\"todo\" \n                 @click.native=\"searchStart(searchRequest)\" />\n    </div>\n    </div>\n\n    <div class=\"wrap\">\n        <div v-for=\"(item , idx) in ListReportDataChanges\"\n            :key=\"idx\" class='element-tech-wrap'>\n                <div class='element-tech' >\n                    <div class=\"title-tech-wrp\">\n                        <h4>Приемка № {{item.id}}</h4>\n                        <UiMark :title=\"item.status | lang('ru')\"\n                                :icon=\"iconChoise(item)\" \n                                :styleChoise=\"styleChoise(item)\"\n                                class=\"mr-1\"\n                                 />\n\n                        <UiMark :title=\"item.references.hot.name | lang('ru')\"\n                                :icon=\"iconData.hot\"\n                                :styleChoise=\"colorStatus.hot\"\n                                v-if=\"item.references.hot.type\"\n                                />\n                    </div>\n                    <div class=\"title-tech-wrp\">\n                        <UiMark :title=\"item.due_date | date('date/time')\"\n                                :styleChoise=\"styleChoise(item)\"\n                                style=\"opacity: 0.6\"/>\n                    </div>\n\n                    <div v-if=\"item.references.classifier\">\n\n                        <p>{{item.references.classifier.code}} {{item.references.classifier.title}}</p>\n    <!--                    <p>Подвид работ: {{item.references.spec.name}}</p>-->\n                        <p>{{item.references.project.name}} , {{item.references.sector.name}} , {{item.references.place.name}}</p>\n                        <p>{{item.references.org.name}}</p>\n                    </div>\n\n\n                    <div class=\"tech-button-wrap\">\n                        <btn-sec title=\"Открыть\" type=\"todo\" @click.native=\"goToElement(item)\"></btn-sec>\n                        <btn-sec title=\"Принять к осмотру\" type=\"accept\"></btn-sec>\n                        <btn-sec title=\"Отклонить\" type=\"cancel\"></btn-sec>\n                    </div>\n                </div>\n        </div>\n    </div>\n  </section>\n</template>\n<script>\nimport UiButton from '@/components/ui/Button'\nimport UiInput from '@/components/ui/Input'\nimport btnSec from '@/components/ui/BtnSec'\nimport UiMark from '@/components/ui/Mark'\nimport UiTabs from '@/components/ui/Tabs'\nimport {HTTP} from \"@/http-common\";\n\nexport default {\n    name: \"Acceptance\",\n    components: {\n        UiButton , UiTabs , UiMark , btnSec, UiInput\n    },\n    data() {\n        return {\n            title : 'Создать приемку',\n            data : null,\n            ListReportData: [],\n            ListReportDataChanges: [],\n            errors : [],\n            tabNum: 0,\n            searchRequest: '',\n            iconData: {\n                new : '',\n                ended : 'contrust-users',\n                hot : 'contrust-Fire'\n            },\n            colorStatus: {\n                new : {\n                    background : '#FFC107',\n                },\n                ended : {\n                    background: '#D4EDDA',\n                    color: '#155724'\n                },\n                hot : {\n                    background: '#F8D7DA',\n                    color: '#721C24'\n                }\n            },\n            dataTabs : [\n                {\n                    title: 'Все',\n                },\n                {\n                    title: 'На сегодня',\n                },\n                {\n                    title: 'Горящие',\n                    icon: 'contrust-Fire',\n                    icon_color: '#d60000',\n\n                },\n                {\n                    title: 'Гибкий график',\n                    icon: 'contrust-Filter_add',\n\n                },\n            ]\n        }\n    },\n    beforeCreate(){\n      let apiData = {\n        method: '/api/v2/QAQC/Report.getList',\n        requestData: {\n          role: 'contractor',\n          references : [\"sector\" , 'hot' , 'classifier_code' , 'spec' , 'contractor' , 'project' , 'creator', 'customer', 'head_foreman', 'org' , 'place']\n        },\n      }\n\n      HTTP.get(apiData.method,{\n        params: apiData.requestData\n      })\n          .then(response => {\n            this.ListReportData = response.data.result\n            this.ListReportDataChanges = this.ListReportData\n            this.ListReportDataChanges.map(one => {\n              return one.references.hot = {\n                type: one.references.hot,\n                name: 'горячая'\n              }\n            })\n            this.ListReportDataChanges.map(one => {\n              if(one.due_date === null) return one.due_date = 'Время не назначено'\n            })\n          })\n          .catch(e => {\n            console.log(e)\n            throw e\n          })\n\n    },\n    methods: {\n        tabIdx(value){\n            console.log(value);\n            this.tabNum = value\n        },\n        iconChoise(item){\n            if(item.status === 'new') return\n            if(item.status === 'process_ended') return \n        },\n        styleChoise(item){\n            if(item.status === 'new') return this.colorStatus.new\n            if(item.status === 'process_ended') return this.colorStatus.ended\n\n\n        },\n        searchStart(request = ''){\n          let apiData = {\n            method: '/api/v2/QAQC/Report.getList',\n            requestData: {\n              find: request,\n              role: 'contractor',\n              references : [\"sector\" , 'hot' , 'classifier_code' , 'spec' , 'contractor' , 'project' , 'creator', 'customer', 'head_foreman', 'org' , 'place']\n            },\n          }\n\n          HTTP.get(apiData.method,{\n            params: apiData.requestData\n          })\n              .then(response => {\n                this.ListReportData = response.data.result\n                this.ListReportDataChanges = this.ListReportData\n                this.ListReportDataChanges.map(one => {\n                  return one.references.hot = {\n                    type: one.references.hot,\n                    name: 'горячая'\n                  }\n                })\n                this.ListReportDataChanges.map(one => {\n                  if(one.due_date === null) return one.due_date = 'Время не назначено'\n                })\n                this.tabsLogic()\n              })\n              .catch(e => {\n                console.log(e)\n                throw e\n              })\n        },\n        tabsLogic(){\n          if(this.tabNum === 2) this.ListReportDataChanges = this.ListReportData.filter(one => {\n            return one.references.hot.type\n          })\n          if(this.tabNum !== 2) this.ListReportDataChanges = this.ListReportData\n        },\n        goToElement(item){\n            if (item.id) this.$router.push({ name: 'OneAcceptance', params: { Id: item.id, status: item.status } })\n        }\n    },\n    watch: {\n        tabNum: function(){\n          this.tabsLogic()\n        }\n    },\n}\n</script>\n<style scoped lang=\"scss\">\n@import '/src/assets/css/variables.scss';\n@import '/src/assets/css/acceptance.scss';\n</style>\n"]}]}