{"remainingRequest":"/Users/drema/Desktop/Drema/transporder/transporder/node_modules/thread-loader/dist/cjs.js!/Users/drema/Desktop/Drema/transporder/transporder/node_modules/babel-loader/lib/index.js!/Users/drema/Desktop/Drema/transporder/transporder/node_modules/eslint-loader/index.js??ref--13-0!/Users/drema/Desktop/Drema/transporder/transporder/src/store/modules/auth.js","dependencies":[{"path":"/Users/drema/Desktop/Drema/transporder/transporder/src/store/modules/auth.js","mtime":1649940231398},{"path":"/Users/drema/Desktop/Drema/transporder/transporder/node_modules/cache-loader/dist/cjs.js","mtime":1644509624454},{"path":"/Users/drema/Desktop/Drema/transporder/transporder/node_modules/thread-loader/dist/cjs.js","mtime":1644509624430},{"path":"/Users/drema/Desktop/Drema/transporder/transporder/node_modules/babel-loader/lib/index.js","mtime":1644509624775},{"path":"/Users/drema/Desktop/Drema/transporder/transporder/node_modules/eslint-loader/index.js","mtime":1644509625425}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kcmVtYS9EZXNrdG9wL0RyZW1hL3RyYW5zcG9yZGVyL3RyYW5zcG9yZGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBIVFRQQVVUSCB9IGZyb20gIkAvaHR0cC1jb21tb24iOwppbXBvcnQgeyBIVFRQIH0gZnJvbSAiQC9odHRwLWNvbW1vbiI7CmltcG9ydCBBeGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW5NZXRob2QiLAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihjdHgsIHF1ZXJ5KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGZvcm0sIGtleTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBmb3JtID0gbmV3IEZvcm1EYXRhKCk7CgogICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gcXVlcnkpIHsKICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoa2V5LCBxdWVyeVtrZXldKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBIVFRQQVVUSC5wb3N0KCJhdXRoL3YxL2xvZ2luIiwgZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIGdldERhdGEgPSByZXNwb25zZS5kYXRhLnJlc3VsdDsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2V0RGF0YSk7CiAgICAgICAgICAgICAgICAgIGN0eC5jb21taXQoJ3VwZGF0ZScsIGdldERhdGEpOyAvLyBjb25zdCB0b2tlbiA9IHJlc3AuZGF0YS50b2tlbgogICAgICAgICAgICAgICAgICAvLyBjb25zdCB1c2VyID0gcmVzcC5kYXRhLnVzZXIKICAgICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pCgogICAgICAgICAgICAgICAgICAvLyBjb25zdCB0b2tlbiA9IHJlc3AuZGF0YS50b2tlbgogICAgICAgICAgICAgICAgICAvLyBjb25zdCB1c2VyID0gcmVzcC5kYXRhLnVzZXIKICAgICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pCiAgICAgICAgICAgICAgICAgIEF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIuY29uY2F0KGdldERhdGEuYWNjZXNzX3Rva2VuKTsgLy8gY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCB0b2tlbiwgdXNlcikKICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZShyZXNwKQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgICAgIGN0eC5jb21taXQoJ3NldEVycm9yJywgZSk7CiAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvZ091dDogZnVuY3Rpb24gbG9nT3V0KGN0eCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY3R4LmNvbW1pdCgnZGVsZXRlVG9rZW4nKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBIVFRQLnBvc3QoJ2F1dGgvbG9nb3V0JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoc3RhdGUsIGdldERhdGEpIHsKICAgICAgc3RhdGUuZ2V0RGF0YSA9IGdldERhdGE7IC8vIHN0YXRlLmNyZWRlbnRpYWxzLnRva2VuID0gZ2V0RGF0YS5hY2Nlc3NfdG9rZW4KCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIGdldERhdGEuYWNjZXNzX3Rva2VuKTsKICAgIH0sCiAgICBkZWxldGVUb2tlbjogZnVuY3Rpb24gZGVsZXRlVG9rZW4oc3RhdGUpIHsKICAgICAgY29uc29sZS5sb2coc3RhdGUpOyAvLyBzdGF0ZS5jcmVkZW50aWFscy50b2tlbiA9IG51bGwKCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgfQogIH0sCiAgc3RhdGU6IHsKICAgIGdldERhdGE6IFtdCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5nZXREYXRhOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/drema/Desktop/Drema/transporder/transporder/src/store/modules/auth.js"],"names":["HTTPAUTH","HTTP","Axios","name","actions","login","ctx","query","form","FormData","key","append","post","then","response","getData","data","result","console","log","commit","defaults","headers","common","access_token","catch","e","logOut","mutations","update","state","localStorage","setItem","deleteToken","removeItem","getters"],"mappings":";;AAAA,SAAQA,QAAR,QAAuB,eAAvB;AACA,SAAQC,IAAR,QAAmB,eAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,eAAe;AACbC,EAAAA,IAAI,EAAE,aADO;AAEbC,EAAAA,OAAO,EAAE;AAEDC,IAAAA,KAFC,iBAEKC,GAFL,EAEWC,KAFX,EAEiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBC,gBAAAA,IADkB,GACX,IAAIC,QAAJ,EADW;;AAEtB,qBAASC,GAAT,IAAgBH,KAAhB,EAAuB;AACrBC,kBAAAA,IAAI,CAACG,MAAL,CAAYD,GAAZ,EAAkBH,KAAK,CAACG,GAAD,CAAvB;AACD;;AAJqB;AAAA,uBAKhBV,QAAQ,CAACY,IAAT,kBAA8BJ,IAA9B,EACCK,IADD,CACM,UAAAC,QAAQ,EAAI;AAChB,sBAAMC,OAAO,GAAGD,QAAQ,CAACE,IAAT,CAAcC,MAA9B;AACAC,kBAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AACAT,kBAAAA,GAAG,CAACc,MAAJ,CAAW,QAAX,EAAsBL,OAAtB,EAHgB,CAIhB;AACN;AACA;;AAFM;AACN;AACA;AACAb,kBAAAA,KAAK,CAACmB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,qBAA2DR,OAAO,CAACS,YAAnE,EAPsB,CAQtB;AACA;AACK,iBAXD,EAYCC,KAZD,CAYO,UAAAC,CAAC,EAAI;AACVR,kBAAAA,OAAO,CAACC,GAAR,CAAYO,CAAZ;AACApB,kBAAAA,GAAG,CAACc,MAAJ,CAAW,UAAX,EAAwBM,CAAxB;AACA,wBAAMA,CAAN;AACD,iBAhBD,CALgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBvB,KAzBM;AA0BDC,IAAAA,MA1BC,kBA0BMrB,GA1BN,EA0BU;AAAA;AAAA;AAAA;AAAA;AAAA;AACfA,gBAAAA,GAAG,CAACc,MAAJ,CAAW,aAAX;AADe;AAAA,uBAITnB,IAAI,CAACW,IAAL,CAAU,aAAV,EAAyBC,IAAzB,CAA8B,UAAAC,QAAQ,EAAI;AAC9CI,kBAAAA,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACE,IAArB;AAA2B,iBADvB,EACyBS,KADzB,CAC+B,UAAAC,CAAC,EAAI;AACxCR,kBAAAA,OAAO,CAACC,GAAR,CAAYO,CAAZ;AAAe,iBAFX,CAJS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOhB;AAjCM,GAFI;AAqCbE,EAAAA,SAAS,EAAE;AACTC,IAAAA,MADS,kBACFC,KADE,EACMf,OADN,EACc;AACrBe,MAAAA,KAAK,CAACf,OAAN,GAAgBA,OAAhB,CADqB,CAErB;;AACAgB,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BjB,OAAO,CAACS,YAAtC;AACD,KALQ;AAMTS,IAAAA,WANS,uBAMGH,KANH,EAMS;AAChBZ,MAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ,EADgB,CAEhB;;AACAC,MAAAA,YAAY,CAACG,UAAb,CAAwB,OAAxB;AACD;AAVQ,GArCE;AAiDbJ,EAAAA,KAAK,EAAE;AACLf,IAAAA,OAAO,EAAE;AADJ,GAjDM;AAoDboB,EAAAA,OAAO,EAAE;AACPnB,IAAAA,IADO,gBACFc,KADE,EACI;AACT,aAAOA,KAAK,CAACf,OAAb;AACD;AAHM;AApDI,CAAf","sourcesContent":["import {HTTPAUTH} from \"@/http-common\";\nimport {HTTP} from \"@/http-common\";\nimport Axios from 'axios'\n\n\nexport default {\n  name: \"LoginMethod\",\n  actions: {\n    \n    async login(ctx , query){\n      let form = new FormData()\n      for (let key in query) {\n        form.append(key , query[key])\n      }\n      await HTTPAUTH.post(`auth/v1/login`,form)\n            .then(response => {\n              const getData = response.data.result\n              console.log(getData)\n              ctx.commit('update' , getData)\n              // const token = resp.data.token\n        // const user = resp.data.user\n        // localStorage.setItem('token', token)\n        Axios.defaults.headers.common['Authorization'] = `Bearer ${getData.access_token}`\n        // commit('auth_success', token, user)\n        // resolve(resp)\n            })\n            .catch(e => {\n              console.log(e)\n              ctx.commit('setError' , e)\n              throw e\n            })\n\n    },\n    async logOut(ctx){\n      ctx.commit('deleteToken')\n\n\n      await HTTP.post('auth/logout').then(response => {\n        console.log(response.data)}).catch(e => {\n        console.log(e)})\n    }\n  },\n  mutations: {\n    update(state , getData){\n      state.getData = getData\n      // state.credentials.token = getData.access_token\n      localStorage.setItem('token', getData.access_token)\n    },\n    deleteToken(state){\n      console.log(state)\n      // state.credentials.token = null\n      localStorage.removeItem('token')\n    }\n  },\n  state: {\n    getData: [],\n  },\n  getters: {\n    data(state){\n      return state.getData\n    }\n  },\n}"]}]}